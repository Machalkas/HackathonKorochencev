<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/png" href="/static/favicon.ico">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <link rel="stylesheet" href="/static/css/index.css">
    <link rel="stylesheet" href="/static/css/join.css">
    <link rel="stylesheet" href="/static/tasks/card_style.css">

    <!--адаптация под мобильный формат-->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Хакатон | </title>
</head>

<body>


    <!-- <header class="mb-auto">
    <div class="">
        <h3 class="header-title">Хакатон</h3>
        
        <p>Александр</p> <a href="../auth/logout"
            class="btn btn-secondary btn-sm btn-red header-logout">Выйти</a>
        
    </div>
</header> -->
    <style>
        .box-shadow {
            box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05);
        }
    </style>
    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow">
        <!-- <h5 class="my-0 mr-md-auto font-weight-normal">Company name</h5> -->
        <h3 class="header-title my-0 mr-md-auto">Хакатон</h3>
        <nav class="my-2 my-md-0 mr-md-3">
            <a class="p-2 text-dark" href="/">Главная</a>
            <a class="p-2 text-dark" href="/tasks">Задания</a>
            <a class="p-2 text-dark" href="/team/all">Команды</a>
            <a class="p-2 text-dark" href="#">Партнеры</a>
            <a class="p-2 text-dark dropdown-toggle" href="#">Александр</a>
            <div class="dropdown-menu" aria-labelledby="dropdown">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
            </div>
        </nav>
        <!-- <a class="nav-link dropdown-toggle" href="#" id="dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
    <div class="dropdown-menu" aria-labelledby="dropdown">
      <a class="dropdown-item" href="#">Action</a>
      <a class="dropdown-item" href="#">Another action</a>
      <a class="dropdown-item" href="#">Something else here</a>
    </div> -->
        <a href="../auth/logout" class="btn btn-secondary btn-sm btn-red header-logout">Выйти</a>

        <!-- <a class="btn btn-outline-primary" href="#">Sign up</a> -->
    </div>
    <div class="base-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <main role="main" class="inner cover" id="main">
            <div class="mt-5" id="div-checkpoint1" style="border: 2px solid forestgreen; border-radius: 10px;">
                <a class="text-dark collapsed" data-toggle="collapse" href="#checkpoint1" role="button"
                    aria-expanded="false" aria-controls="checkpoint1">
                    <h3 class="dropdown-toggle">Чекпоинт 1</h3>
                </a>
                <div class="container collapse show" id="checkpoint1">
                    <div class="row mb-1" style="font-weight: bold;">
                        <div class="col-sm"><a href="/team/GoGo" target="_blank">GoGo</a><a class="text-dark collapsed"
                                data-toggle="collapse" href="#team-solutions-1_1" role="button" aria-expanded="false"
                                aria-controls="team-solutions-1_1"> Решения</a></div>
                        <div class="col-sm"><a href="https://djbook.ru/rel1.9/topics/forms/modelforms.html"
                                target="_blank" class="btn btn-sm btn-blue">Подключится</a></div>
                        <div class="col-sm">-</div>
                        <div class="col-sm">-</div>
                        <div class="col-sm"><a class="btn btn-sm btn-primary" data-toggle="collapse"
                                href="#team-evaluate-1_1" role="button" aria-expanded="true"
                                aria-controls="team-evaluate-1_1">Оценить</a></div>
                        <div class="col-sm"><a class="btn btn-sm btn-green">Команда пришла</a></div>
                    </div>
                    <div class="container mt-3 mb-3 collapse show" id="team-evaluate-1_1" style="background: thistle;">
                        <form method="post" class="form mt-3" id="evaluate-form-1_1" onchange="checkForm(1,1)">
                            <label>Работоспособность прототипа</label><input type="number" class="form-control mt-1"
                                style="max-width: 4em;margin-left: auto;margin-right: auto;" name="1_1_1">
                            <p style="color: dimgray; font-size: small;">max 10</p><label>Соответствие результата
                                поставленной задаче</label><input type="number" class="form-control mt-1"
                                style="max-width: 4em;margin-left: auto;margin-right: auto;" name="2_1_1">
                            <p style="color: dimgray; font-size: small;">max 10</p><label>Презентация</label><input
                                type="number" class="form-control mt-1"
                                style="max-width: 4em;margin-left: auto;margin-right: auto;" name="3_1_1">
                            <p style="color: dimgray; font-size: small;">max 5</p>
                            <p style="font-size:1.5em; color:red;">Итого</p>
                            <p style="font-size:1.8em; color:red;" id="total1_1">36</p><div class="info">?</div><input type="button"
                                value="Сохранить" class="btn btn-primary btn-blue mt-3 mb-3" required=""
                                onclick="submitEvaluate(1,1)">
                        </form>
                        <style>
                            .info{
                            background-color: lightgoldenrodyellow;
                            border: solid khaki;
                            border-radius: 10em;
                            border-width: 1px;
                            max-width: 1.7em;
                            max-height: 1.7em;
                            font-size: 13px;
                            font-weight: bold;
                            position: relative;
                            left: 13em;
                            bottom: 3.6em;
                            }
                        </style>
                    </div>
                    <div class="container collapse mt-3 mb-3" id="team-solutions-1_1" style="background: gainsboro;">
                        <div class="row mb-1" style="font-weight: bold;">
                            <div class="col-sm"><a href="/media/solution/стркутура_бд.pdf"
                                    target="_blank">стркутура_бд.pdf</a></div>
                            <div class="col-sm">-</div>
                            <div class="col-sm">16.03.2021 17:30:53</div>
                        </div>
                        <div class="row mb-1" style="font-weight: bold;">
                            <div class="col-sm"><a href="/media/solution/gost_espd_19_201_78_hLNtbj2.pdf"
                                    target="_blank">gost_espd_19_201_78_hLNtbj2.pdf</a></div>
                            <div class="col-sm"><a href="https://aliexpress.ru/" target="_blank">Ссылка</a></div>
                            <div class="col-sm">16.03.2021 17:29:00</div>
                        </div>
                    </div>
                    <hr>
                    <div class="row mb-1" style="font-weight: bold;">
                        <div class="col-sm"><a href="/team/ЦентрИнвест" target="_blank">ЦентрИнвест</a></div>
                        <div class="col-sm"><a href="https://djbook.ru/rel1.9/topics/forms/modelforms.html"
                                target="_blank" class="btn btn-sm btn-blue">Подключится</a></div>
                        <div class="col-sm">-</div>
                        <div class="col-sm">-</div>
                        <div class="col-sm"><a class="collapsed btn btn-sm btn-primary" data-toggle="collapse"
                                href="#team-evaluate-2_1" role="button" aria-expanded="false"
                                aria-controls="team-evaluate-2_1">Оценить</a></div>
                        <div class="col-sm"><a class="btn btn-sm btn-green">Команда пришла</a></div>
                    </div>
                    <div class="container collapse mt-3 mb-3" id="team-evaluate-2_1" style="background: thistle;">
                        <form method="post" class="form mt-3" id="evaluate-form-2_1" onchange="checkForm(2,1)">
                            <label>Работоспособность прототипа</label><input type="number" class="form-control mt-1"
                                style="max-width: 4em;margin-left: auto;margin-right: auto;" name="1_2_1">
                            <p style="color: dimgray; font-size: small;">max 10</p><label>Соответствие результата
                                поставленной задаче</label><input type="number" class="form-control mt-1"
                                style="max-width: 4em;margin-left: auto;margin-right: auto;" name="2_2_1">
                            <p style="color: dimgray; font-size: small;">max 10</p><label>Презентация</label><input
                                type="number" class="form-control mt-1"
                                style="max-width: 4em;margin-left: auto;margin-right: auto;" name="3_2_1">
                            <p style="color: dimgray; font-size: small;">max 5</p>
                            <p style="font-size:1.5em; color:red;">Итого</p>
                            <p style="font-size:1.8em; color:red;" id="total2_1">0</p><input type="button"
                                value="Сохранить" class="btn btn-primary btn-blue mt-3 mb-3" required=""
                                onclick="submitEvaluate(2,1)">
                        </form>
                    </div>
                    <hr>
                </div>
            </div>
        </main>
        <style>
            .span-date {
                background-color: gainsboro;
                border: 1px solid gainsboro;
                border-radius: 10px;
                padding: 0.2em;
                font-weight: initial;
                font-size: 0.9em;
            }

            .big-number {
                font-size: 8em;
                font-weight: 500;
                /* font-family: -webkit-pictograph; */
                text-shadow: 0.05em 0.05em grey;
            }
        </style>
    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>

    <!-- <script>var token = 'THv8V5emXTMMxw4o3Nl8nwKZhqbXuKjAMwxov2IyuUR0yhZH9lNpW381EPIM9XAG'; var team_pk = ; var user_pk = 1;</script> -->
    <!-- <script src="/static/team/number%20increase.js"></script> -->
    <!-- <script src="/static/data%20update.js"></script> -->
    <!-- <script src="/static/team/ajax.js"></script> -->
    <!-- <script>update(team_pk,'score');</script> -->
    <script>var img_empty_street = "/static/svg/empty_street.svg"</script>
    <script>
        let m = document.getElementById("main");
        function createTeams(teams) {
            let cards = "";
            if (teams.length == 0) {
                document.getElementById("teams").innerHTML = "Нет команд";
                m.innerHTML = '<img src="' + img_empty_street + '" alt="пусто..." style="width: 60%; margin-top: 3%; margin-bottom: 2%;">\n<p class="lead">Ни одна команда не зарегистрировалась 😢</p>';
            } else {
                for (let i = 0; i < teams.length; i++) {
                    cards += '<a class="a-card" href="/team/' + teams[i]["name"] + '">\n<div class="card bg-light mb-4">\n<div class="card-header"><h5>' + teams[i]["name"] + '</h5></div>\n<div class="card-body">\n<p>Счет ' + teams[i]['score'] + '</p>\n</div>\n</div>\n</a>\n';
                }
                m.innerHTML = cards;
            }
        }
        function getTeams() {
            let send = { "action": "get-teams" }
            $.ajax({
                url: '/team/ajax',
                method: 'get',
                dataType: 'json',
                data: send,
                success: function (data) {
                    createTeams(data["teams"]);
                },
                error: function () {
                    console.log("Ошибка подключения к серверу");
                }
            });
            setTimeout(getTeams, 60000);
        }
        getTeams();
    </script>

</body>

</html>